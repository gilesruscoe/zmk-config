/*
 * ZMK Matrix Transform for a 4-key handwired micropad
 * Assumes direct wiring (no rows/columns)
 */

#include <dt-bindings/gpio/gpio.h> // Needed for GPIO_ACTIVE_LOW
#include <dt-bindings/zmk/matrix_transform.h> // Needed for matrix_transform

/ {
    // Define the matrix transform using gpio-map for direct wiring
    // Each entry maps a key position (index starting from 0) to a GPIO pin.
    // Replace P0_XX with the ACTUAL pins you used!
    zmk_matrix_transform: matrix_transform {
        compatible = "zmk,matrix-transform";
        columns = <4>; // Number of keys
        rows = <1>;    // Treat as single row for direct wiring

        gpio-map = <
        RC(0,0) &pro_micro 19 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)
        RC(0,1) &pro_micro 18 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)
        RC(0,2) &pro_micro 15 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)
        RC(0,3) &pro_micro 14 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)
        >;
    };
    chosen {
        zmk,kscan = &zmk_matrix_transform; // Point to the matrix_transform node defined above
      };
};